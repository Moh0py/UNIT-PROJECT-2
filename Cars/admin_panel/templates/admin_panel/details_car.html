{% extends 'pages/base.html' %}

{% block content %}
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <div class="container my-5">
    <h2>{{ car.name }} {{ car.model }} ({{ car.year }})</h2>
    <p><strong>Brand:</strong> {{ car.brand }}</p>
    <p>{{ car.description }}</p>

    <div class="row g-4">
      <div class="col-md-6">
        {% if car.front_image %}
          <img src="{{ car.front_image.url }}" class="img-fluid rounded mb-3" alt="Front View">
        {% endif %}
        {% if car.back_image %}
          <img src="{{ car.back_image.url }}" class="img-fluid rounded" alt="Back View">
        {% endif %}
      </div>
      <div class="col-md-6">
        <h4>3D Model</h4>
        {% if car.model_3d_url %}
          <model-viewer
            src="{{ car.model_3d_url }}"
            alt="{{ car.name }} 3D Model"
            camera-controls
            auto-rotate
            ar
            ios-src="{{ car.model_3d_url }}"
            style="width: 100%; height: 300px;">
          </model-viewer>
        {% else %}
          <p class="text-muted">No 3D view available.</p>
        {% endif %}
      </div>
    </div>
  </div>
  
<!-- Display Reviews -->
<h4 class="mt-4">Reviews:</h4>
{% for review in cars.reviews.all %}
  <div class="mt-3">
    <h5>{{ review.name }}</h5>
    <p>{{ review.comment }}</p>
    <small>Reviewed on: {{ review.created_at|date:"Y-m-d H:i" }}</small>
  </div>
{% empty %}
  <p>No reviews yet. Be the first to review this car!</p>
{% endfor %}

{% endblock %}

